package exo;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Date;

public class Server {

	public static void main(String[] args) throws Exception {
		// first param of args will be port number 

		// check if port number is giver 
		if (args.length != 2){
			System.err.println("Usage: java " + Server.class.getName() + " port timeDelay");
			System.exit(1);
		}

		//nouveau server socket sur le port en param 
		ServerSocket listener = new ServerSocket(Integer.parseInt(args[0]));
		 {
	         String clientSentence;
	         String capitalizedSentence;
	         ServerSocket welcomeSocket = new ServerSocket(6789);

	         while(true)
	         {
	            Socket connectionSocket = welcomeSocket.accept();
	            BufferedReader inFromClient =
	               new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
	            DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
	            clientSentence = inFromClient.readLine();
	            System.out.println("Received: " + clientSentence);
	            capitalizedSentence = clientSentence.toUpperCase() + '\n';
	            outToClient.writeBytes(capitalizedSentence);
	         }
	      }

	}

}

